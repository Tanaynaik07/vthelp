<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notes</title>
    <link rel="stylesheet" href="/styles/main.css">
</head>
<body>
    <h1>Available Notes</h1>

    <% if (notes.length === 0) { %>
        <p>No notes found for this subject.</p>
    <% } else { %>
        <% notes.forEach(note => { %>
            <div class="paper">
                <div class="paper-header" onclick="togglePaper(this)">
                    <h2><%= note.subjectname %> - <%= note.topic %></h2>
                    <p>Description: <%= note.description %></p>
                    <p>Uploaded: <%= new Date(note.created_at).toLocaleDateString() %></p>
                    <span class="toggle-icon">▼</span>
                </div>
                <div class="paper-content">
                    <!-- Open PDF inside the page -->
                    <iframe src="<%= note.nlink %>" width="100%" height="600px"></iframe>

                    <!-- Open PDF in a new tab -->
                    <p><a href="<%= note.nlink %>" target="_blank">View Full PDF</a></p>
                </div>
            </div>
            <hr>
        <% }); %>
    <% } %>

    <script>
        function togglePaper(header) {
            const content = header.nextElementSibling;
            const icon = header.querySelector('.toggle-icon');
            
            if (content.style.maxHeight) {
                content.style.maxHeight = null;
                icon.textContent = '▼';
            } else {
                content.style.maxHeight = content.scrollHeight + "px";
                icon.textContent = '▲';
            }
        }
    </script>
    <!-- <%- include('partials/footer') %> -->
</body>
</html> 